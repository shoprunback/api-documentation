<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>ShopRunBack API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-102502582-10"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-102502582-10');
    </script>
  </head>

  <body class="api " data-languages="[&quot;shell&quot;,&quot;ruby&quot;,&quot;php&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />

      <div class="tocify shared-toc">
        <ul class="tocify-header">
          <li class="tocify-item" style="cursor: pointer;"><a href="/">HOME</a></li>
          <li class="tocify-item" style="cursor: pointer;"><a href="/definitions.html">Definitions</a></li>
        </ul>
      </div>

        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="ruby">Ruby</a>
              <a href="#" data-language-name="php">PHP</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://dashboard.shoprunback.com'>Sign Up for a Developer Key</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="shoprunback-api-documentation">ShopRunBack API Documentation</h1>

<p>Welcome on the ShopRunBack public API documentation.</p>

<p>ShopRunBack is the inventor of the Return As A Service solution.</p>

<p>This API provides all the endpoints for any e-commerce retailer to get all the features for an optimized return experience for its customers.</p>

<p>You can also get the swagger documentation on <a href="https://app.swaggerhub.com/apis/Shoprunback/SRB-APP">https://app.swaggerhub.com/apis/Shoprunback/SRB-APP</a>.</p>

<p>For feature request, use the built in form: <a href="https://dashboard.shoprunback.com/features">https://dashboard.shoprunback.com/features</a></p>

<p>If you are coding in PHP, please use our <a href="https://shoprunback.github.io/documentation/php.html">PHP library</a>.</p>

<p>If you got any questions, send an email to: tech_at_shoprunback.com.</p>

          <h1 id="authentication">Authentication</h1>

<blockquote>
<p>To authorize your queries, you must provide your company API Token in the HTTP Headers like this:</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="no">HTTParty</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span>
              <span class="n">endpoint</span><span class="p">,</span>
              <span class="ss">body: </span><span class="n">content</span><span class="p">,</span>
              <span class="ss">headers: </span><span class="p">{</span>
                <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
                <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s2">"Token token=</span><span class="si">#{</span><span class="n">your_token</span><span class="si">}</span><span class="s2">"</span>
              <span class="p">}</span>
            <span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s2">"&lt;endpoint&gt;"</span>
  -H <span class="s2">"Authorization: Token token=&lt;your_token&gt;"</span>
</code></pre><pre class="highlight php tab-php"><code>
<span class="cp">&lt;?php</span>
<span class="c1">// Load the library
</span><span class="k">require</span> <span class="s1">'path/to/lib/shoprunback-php/init.php'</span><span class="p">;</span>

<span class="c1">// Set your token
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">setToken</span><span class="p">(</span><span class="s1">'your_token'</span><span class="p">);</span>

<span class="c1">// Define the environment you want to use (Production or Sandbox)
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">useProductionEnvironment</span><span class="p">();</span>

<span class="c1">// Here your token is already set
// You can check if your token is correct by loading your ShopRunBack account
</span><span class="nv">$account</span> <span class="o">=</span> <span class="nx">\Shoprunback\Elements\Account</span><span class="o">::</span><span class="na">getOwn</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>Replace <code class="prettyprint">your_token</code> with your API key.</p>
</blockquote>

<p>We use API keys to allow access to the API.</p>

<p>You can get your API key on the <a href="http://dashboard.shoprunback.com/tokens">dashboard</a>.</p>

<p>ShopRunBack expects for the API key to be included in all API requests to the server in a header that looks like the following:</p>

<p><code class="prettyprint">Authorization: Token token=&lt;your_token&gt;</code></p>

<aside class="notice">
Your API Key is private and linked to your own account. Do not share it with anybody.
</aside>

          <h1 id="products-catalog">Products catalog</h1>

<p>Once your account created and configured (follow the onboarding process for that), you must push your products catalog.
Only products in the ShopRunBack catalog can be returned.</p>

<p>First, create your brands if you have any and then create your products.</p>

          <h2 id="create-a-brand">Create a brand</h2>
<pre class="highlight ruby tab-ruby"><code><span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">name: </span><span class="s2">"Apple"</span><span class="p">,</span>
  <span class="ss">reference: </span><span class="s2">"apple"</span>
<span class="p">}</span>

<span class="no">HTTParty</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span>
              <span class="s2">"https://dashboard.shoprunback.com/api/v1/brands"</span><span class="p">,</span>
              <span class="ss">body: </span><span class="n">body</span><span class="p">,</span>
              <span class="ss">headers: </span><span class="p">{</span>
                <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
                <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s2">"Token token=</span><span class="si">#{</span><span class="n">your_token</span><span class="si">}</span><span class="s2">"</span>
              <span class="p">}</span>
            <span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X <span class="s2">"POST"</span> <span class="s2">"https://dashboard.shoprunback.com/api/v1/brands"</span> <span class="se">\</span>
     -H <span class="s2">"Authorization: Token token=&lt;your_token&gt;"</span> <span class="se">\</span>
     -H <span class="s2">"Content-Type: application/json; charset=utf-8"</span> <span class="se">\</span>
     -d <span class="s1">$'{
  "name": "Apple",
  "reference": "apple"
}'</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Load the library
</span><span class="k">require</span> <span class="s1">'path/to/lib/shoprunback-php/init.php'</span><span class="p">;</span>

<span class="c1">// Set your token
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">setToken</span><span class="p">(</span><span class="s1">'your_token'</span><span class="p">);</span>

<span class="c1">// Define the environment you want to use (Production or Sandbox)
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">useProductionEnvironment</span><span class="p">();</span>

<span class="c1">// Create a new blank Brand and add mandatory attributes
</span><span class="nv">$brand</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Shoprunback\Elements\Brand</span><span class="p">();</span>
<span class="nv">$brand</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">=</span> <span class="s1">'Apple'</span><span class="p">;</span>
<span class="nv">$brand</span><span class="o">-&gt;</span><span class="na">reference</span> <span class="o">=</span> <span class="s1">'apple'</span><span class="p">;</span>

<span class="c1">// Save the Brand
</span><span class="nv">$brand</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apple"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apple"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>By default, once your <strong>retailer account is created and your company details entered</strong>, a <strong>default Brand is created</strong>.
But you <strong>can add your own Brands</strong> if you have multiple Brands in your catalog.</p>

<p>This endpoint creates a new Brand.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://dashboard.shoprunback.com/api/v1/brands</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td>yes</td>
<td>Name of the brand, displayed to the customer on the return process</td>
</tr>
<tr>
<td><strong>reference</strong></td>
<td>yes</td>
<td>Unique reference of the brand (if you don&rsquo;t have any, use the name)</td>
</tr>
</tbody></table>

<aside class="success">
If you don&rsquo;t have more than one brand, you don&rsquo;t have to create another one, the default brand is enough.
</aside>

<h2 id="list-your-brands">List your brands</h2>
<pre class="highlight ruby tab-ruby"><code><span class="no">HTTParty</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span>
              <span class="s2">"https://dashboard.shoprunback.com/api/v1/brands"</span><span class="p">,</span>
              <span class="ss">headers: </span><span class="p">{</span>
                <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
                <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s2">"Token token=</span><span class="si">#{</span><span class="n">your_token</span><span class="si">}</span><span class="s2">"</span>
              <span class="p">}</span>
            <span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X <span class="s2">"GET"</span> <span class="s2">"https://dashboard.shoprunback.com/api/v1/brands"</span> <span class="se">\</span>
     -H <span class="s2">"Authorization: Token token=&lt;your_token&gt;"</span> <span class="se">\</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Load the library
</span><span class="k">require</span> <span class="s1">'path/to/lib/shoprunback-php/init.php'</span><span class="p">;</span>

<span class="c1">// Set your token
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">setToken</span><span class="p">(</span><span class="s1">'your_token'</span><span class="p">);</span>

<span class="c1">// Define the environment you want to use (Production or Sandbox)
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">useProductionEnvironment</span><span class="p">();</span>

<span class="c1">// Get all your brands
</span><span class="nv">$brands</span> <span class="o">=</span> <span class="nx">\Shoprunback\Elements\Brand</span><span class="o">::</span><span class="na">all</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967deb"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apple"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apple"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dec"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Samsung"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"samsung"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint lists all your brands.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://dashboard.shoprunback.com/api/v1/brands</code></p>

          <h2 id="add-your-products">Add your products</h2>
<pre class="highlight ruby tab-ruby"><code><span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"label"</span><span class="p">:</span> <span class="s2">"Iphone 14S Blue"</span><span class="p">,</span>
  <span class="s2">"reference"</span><span class="p">:</span> <span class="s2">"IPHONE 14S B"</span><span class="p">,</span>
  <span class="s2">"ean"</span><span class="p">:</span> <span class="s2">"1258987561456"</span><span class="p">,</span>
  <span class="s2">"weight_grams"</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
  <span class="s2">"brand_id"</span><span class="p">:</span> <span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span>
  <span class="s2">"image_url"</span><span class="p">:</span> <span class="s2">"http://www.apple.com/images/iphone-14s.jpg"</span>
<span class="p">}</span>

<span class="no">HTTParty</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span>
              <span class="s2">"https://dashboard.shoprunback.com/api/v1/products"</span><span class="p">,</span>
              <span class="ss">body: </span><span class="n">body</span><span class="p">,</span>
              <span class="ss">headers: </span><span class="p">{</span>
                <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
                <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s2">"Token token=</span><span class="si">#{</span><span class="n">your_token</span><span class="si">}</span><span class="s2">"</span>
              <span class="p">}</span>
            <span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X <span class="s2">"POST"</span> <span class="s2">"https://dashboard.shoprunback.com/api/v1/products"</span> <span class="se">\</span>
     -H <span class="s2">"Authorization: Token token=&lt;your_token&gt;"</span> <span class="se">\</span>
     -H <span class="s2">"Content-Type: application/json; charset=utf-8"</span> <span class="se">\</span>
     -d <span class="s1">$'{
  "label": "Iphone 14S Blue",
  "reference": "IPHONE 14S B",
  "ean": "1258987561456",
  "weight_grams": 200,
  "brand_id": "1f27f9d9-3b5c-4152-98b7-760f56967dea",
  "picture_file_url": "http://www.apple.com/images/iphone-14s.jpg"
}'</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Load the library
</span><span class="k">require</span> <span class="s1">'path/to/lib/shoprunback-php/init.php'</span><span class="p">;</span>

<span class="c1">// Set your token
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">setToken</span><span class="p">(</span><span class="s1">'your_token'</span><span class="p">);</span>

<span class="c1">// Define the environment you want to use (Production or Sandbox)
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">useProductionEnvironment</span><span class="p">();</span>

<span class="c1">// Create a new Product
</span><span class="nv">$product</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Shoprunback\Elements\Product</span><span class="p">();</span>
<span class="nv">$product</span><span class="o">-&gt;</span><span class="na">label</span> <span class="o">=</span> <span class="s1">'Iphone 14S Blue'</span><span class="p">;</span>
<span class="nv">$product</span><span class="o">-&gt;</span><span class="na">reference</span> <span class="o">=</span> <span class="s1">'IPHONE 14S B'</span><span class="p">;</span>
<span class="nv">$product</span><span class="o">-&gt;</span><span class="na">weight_grams</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
<span class="nv">$product</span><span class="o">-&gt;</span><span class="na">brand_id</span> <span class="o">=</span> <span class="s1">'1f27f9d9-3b5c-4152-98b7-760f56967dea'</span><span class="p">;</span>
<span class="nv">$product</span><span class="o">-&gt;</span><span class="na">ean</span> <span class="o">=</span> <span class="s1">'1258987561456'</span><span class="p">;</span>
<span class="nv">$product</span><span class="o">-&gt;</span><span class="na">picture_url</span> <span class="o">=</span> <span class="s1">'https://s3.eu-central-1.amazonaws.com/shoprunback-dev/products/484/7b4/f4-/pictures/medium.?1505912197'</span><span class="p">;</span>

<span class="c1">// Save the Product
</span><span class="nv">$product</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>The above command returns the same JSON object with the id of the created product:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Iphone 14S Blue"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IPHONE 14S B"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ean"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1258987561456"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"weight_grams"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="s2">"picture_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.eu-central-1.amazonaws.com/shoprunback-dev/products/484/7b4/f4-/pictures/medium.?1505912197"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"brand"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apple"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apple"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Push all your products&rsquo; catalog with this endpoint.</p>

<p>The image in not mandatory but the return experience of your customer will be better with it.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://dashboard.shoprunback.com/api/v1/products</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>label</strong></td>
<td>yes</td>
<td>Label of the product (ie. common name)</td>
</tr>
<tr>
<td><strong>reference</strong></td>
<td>yes</td>
<td>unique reference in your catalog</td>
</tr>
<tr>
<td><strong>weight_grams</strong></td>
<td>yes</td>
<td>weight (grams) of the product (package included)</td>
</tr>
<tr>
<td>ean</td>
<td>no</td>
<td>barcode</td>
</tr>
<tr>
<td>brand_id</td>
<td>no</td>
<td>if you have created a brand and this product has this brand. Otherwise, the default brand is automaticaly used</td>
</tr>
<tr>
<td>picture_file_url</td>
<td>no</td>
<td>public URL to the product image (JPG or PNG), to avoid imperfect cropping, use a square image</td>
</tr>
<tr>
<td>picture_file_base64</td>
<td>no</td>
<td>if your product&rsquo;s image is not hosted on the internet, you can provide it with a base64 version of it</td>
</tr>
</tbody></table>

<aside class="success">
If you only have the default brand, you don&rsquo;t have to provide the brand_id.
</aside>

<h2 id="create-a-product-with-its-brand">Create a product with its brand</h2>
<pre class="highlight ruby tab-ruby"><code><span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"label"</span><span class="p">:</span> <span class="s2">"Iphone 14S Blue"</span><span class="p">,</span>
  <span class="s2">"reference"</span><span class="p">:</span> <span class="s2">"IPHONE 14S B"</span><span class="p">,</span>
  <span class="s2">"ean"</span><span class="p">:</span> <span class="s2">"1258987561456"</span><span class="p">,</span>
  <span class="s2">"brand"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Apple"</span><span class="p">,</span>
    <span class="s2">"reference"</span><span class="p">:</span> <span class="s2">"apple"</span>
  <span class="p">},</span>
  <span class="s2">"image_url"</span><span class="p">:</span> <span class="s2">"http://www.apple.com/images/iphone-14s.jpg"</span>
<span class="p">}</span>

<span class="no">HTTParty</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span>
              <span class="s2">"https://dashboard.shoprunback.com/api/v1/products"</span><span class="p">,</span>
              <span class="ss">body: </span><span class="n">body</span><span class="p">,</span>
              <span class="ss">headers: </span><span class="p">{</span>
                <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
                <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s2">"Token token=</span><span class="si">#{</span><span class="n">your_token</span><span class="si">}</span><span class="s2">"</span>
              <span class="p">}</span>
            <span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X <span class="s2">"POST"</span> <span class="s2">"https://dashboard.shoprunback.com/api/v1/products"</span> <span class="se">\</span>
     -H <span class="s2">"Authorization: Token token=&lt;your_token&gt;"</span> <span class="se">\</span>
     -H <span class="s2">"Content-Type: application/json; charset=utf-8"</span> <span class="se">\</span>
     -d <span class="s1">$'{
  "label": "Iphone 14S Blue",
  "reference": "IPHONE 14S B",
  "ean": "1258987561456",
  "weight_in_grams": 200,
  "brand": {
    "name": "Apple",
    "reference": "apple"
  },
  "picture_file_url": "http://www.apple.com/images/iphone-14s.jpg"
}'</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Load the library
</span><span class="k">require</span> <span class="s1">'path/to/lib/shoprunback-php/init.php'</span><span class="p">;</span>

<span class="c1">// Set your token
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">setToken</span><span class="p">(</span><span class="s1">'your_token'</span><span class="p">);</span>

<span class="c1">// Define the environment you want to use (Production or Sandbox)
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">useProductionEnvironment</span><span class="p">();</span>

<span class="c1">// Create a Brand for your Product
</span><span class="nv">$brand</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Shoprunback\Elements\Brand</span><span class="p">();</span>
<span class="nv">$brand</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">=</span> <span class="s1">'Apple'</span><span class="p">;</span>
<span class="nv">$brand</span><span class="o">-&gt;</span><span class="na">reference</span> <span class="o">=</span> <span class="s1">'apple'</span><span class="p">;</span>

<span class="c1">// Create a new Product
</span><span class="nv">$product</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Shoprunback\Elements\Product</span><span class="p">();</span>
<span class="nv">$product</span><span class="o">-&gt;</span><span class="na">label</span> <span class="o">=</span> <span class="s1">'Iphone 14S Blue'</span><span class="p">;</span>
<span class="nv">$product</span><span class="o">-&gt;</span><span class="na">reference</span> <span class="o">=</span> <span class="s1">'IPHONE 14S B'</span><span class="p">;</span>
<span class="nv">$product</span><span class="o">-&gt;</span><span class="na">weight_grams</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
<span class="nv">$product</span><span class="o">-&gt;</span><span class="na">brand</span> <span class="o">=</span> <span class="nv">$brand</span><span class="p">;</span>
<span class="nv">$product</span><span class="o">-&gt;</span><span class="na">ean</span> <span class="o">=</span> <span class="s1">'1258987561456'</span><span class="p">;</span>
<span class="nv">$product</span><span class="o">-&gt;</span><span class="na">picture_url</span> <span class="o">=</span> <span class="s1">'https://s3.eu-central-1.amazonaws.com/shoprunback-dev/products/484/7b4/f4-/pictures/medium.?1505912197'</span><span class="p">;</span>

<span class="c1">// Save the Product
</span><span class="nv">$product</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>The above command returns the same JSON object with the id of the created product:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Iphone 14S Blue"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IPHONE 14S B"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ean"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1258987561456"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"brand"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20d0be72-a191-4eb8-af22-9dd4c3e65fe8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apple"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apple"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"weight_grams"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="s2">"picture_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.eu-central-1.amazonaws.com/shoprunback-dev/products/484/7b4/f4-/pictures/medium.?1505912197"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can create your product directly with the brand object embedded.</p>

<p>The image in not mandatory but the return experience is better with it.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://dashboard.shoprunback.com/api/v1/products</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>label</strong></td>
<td>yes</td>
<td>Label of the product (ie. common name)</td>
</tr>
<tr>
<td><strong>reference</strong></td>
<td>yes</td>
<td>unique reference in your catalog</td>
</tr>
<tr>
<td><strong>weight_grams</strong></td>
<td>yes</td>
<td>weight (grams) of the product (package included)</td>
</tr>
<tr>
<td>ean</td>
<td>no</td>
<td>barcode</td>
</tr>
<tr>
<td>color</td>
<td>no</td>
<td>displayed as is on the web return process (no translation)</td>
</tr>
<tr>
<td>brand</td>
<td>no</td>
<td>the brand object with all its required attributes</td>
</tr>
<tr>
<td>picture_file_url</td>
<td>no</td>
<td>public URL to the product image (JPG or PNG), to avoid imperfect cropping, use a square image</td>
</tr>
<tr>
<td>picture_file_base64</td>
<td>no</td>
<td>if your product&rsquo;s image is not hosted on the internet, you can provide it with a base64 version of it</td>
</tr>
</tbody></table>

<h2 id="list-your-products">List your products</h2>
<pre class="highlight ruby tab-ruby"><code><span class="no">HTTParty</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span>
              <span class="s2">"https://dashboard.shoprunback.com/api/v1/products"</span><span class="p">,</span>
              <span class="ss">headers: </span><span class="p">{</span>
                <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
                <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s2">"Token token=</span><span class="si">#{</span><span class="n">your_token</span><span class="si">}</span><span class="s2">"</span>
              <span class="p">}</span>
            <span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X <span class="s2">"GET"</span> <span class="s2">"https://dashboard.shoprunback.com/api/v1/products?page=1"</span> <span class="se">\</span>
     -H <span class="s2">"Authorization: Token token=&lt;your_token&gt;"</span> <span class="se">\</span>
     -H <span class="s2">"Content-Type: application/json; charset=utf-8"</span> <span class="se">\</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Load the library
</span><span class="k">require</span> <span class="s1">'path/to/lib/shoprunback-php/init.php'</span><span class="p">;</span>

<span class="c1">// Set your token
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">setToken</span><span class="p">(</span><span class="s1">'your_token'</span><span class="p">);</span>

<span class="c1">// Define the environment you want to use (Production or Sandbox)
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">useProductionEnvironment</span><span class="p">();</span>

<span class="c1">// Get all your products
</span><span class="nv">$products</span> <span class="o">=</span> <span class="nx">\Shoprunback\Elements\Product</span><span class="o">::</span><span class="na">all</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"current_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"previous_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"next_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"per_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"products"</span><span class="p">:</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Iphone 14S Blue"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IPHONE 14S B"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ean"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1258987561456"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"brand"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20d0be72-a191-4eb8-af22-9dd4c3e65fe8"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apple"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apple"</span><span class="w">
          </span><span class="p">},</span><span class="w">
        </span><span class="s2">"picture_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s3.amazonaws/assets/iphone_14s.jpg"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Iphone 14S Red"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IPHONE 14S B"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ean"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1258987561456"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"brand"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20d0be72-a191-4eb8-af22-9dd4c3e65fe8"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apple"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apple"</span><span class="w">
          </span><span class="p">},</span><span class="w">
        </span><span class="s2">"picture_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s3.amazonaws/assets/iphone_14s.jpg"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can list all your products on ShopRunBack with this endpoint.</p>

<p>The result is paginated, provide the <code class="prettyprint">page</code> parameter to get a specific page (default is page 1).</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://dashboard.shoprunback.com/api/v1/products?page=1</code></p>

          <h1 id="order">Order</h1>

<p>Once your catalog is uploaded on ShopRunBack, you can plug your e-commerce website to the ShopRunBack dashboard.</p>

<p>Only an existing order can be returned. You have 2 possibilities, depending on your desired return flow :</p>

<ul>
<li>When a user request a return on your website, you create the corresponding order on the API and initiate the corresponding return.</li>
<li>You push the order on the API directly after it is processed on your website and just redirect the customer when he/she requests a return.</li>
</ul>

<p>In both cases, you will have to create the order, sooner or later.</p>

<h2 id="create-an-order">Create an order</h2>
<pre class="highlight ruby tab-ruby"><code><span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"ordered_at"</span><span class="p">:</span> <span class="s2">"2017-02-03"</span><span class="p">,</span>
  <span class="s2">"order_number"</span><span class="p">:</span> <span class="s2">"4548-9854"</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Steve"</span><span class="p">,</span>
    <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Jobs"</span><span class="p">,</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"steve@apple.com"</span><span class="p">,</span>
    <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"555-878-456"</span><span class="p">,</span>
    <span class="s2">"address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"line1"</span><span class="p">:</span> <span class="s2">"One Infinite Loop"</span><span class="p">,</span>
      <span class="s2">"line2"</span><span class="p">:</span> <span class="s2">"Building B"</span><span class="p">,</span>
      <span class="s2">"zipcode"</span><span class="p">:</span> <span class="s2">"95014"</span><span class="p">,</span>
      <span class="s2">"country_code"</span><span class="p">:</span> <span class="s2">"US"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Cupertino"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"California"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">"items"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">"product_id"</span><span class="p">:</span> <span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">],</span>
  <span class="s2">"metadata"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"foo"</span><span class="p">:</span> <span class="s2">"bar"</span><span class="p">,</span>
    <span class="s2">"bar"</span><span class="p">:</span> <span class="s2">"foo"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="no">HTTParty</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span>
              <span class="s2">"https://dashboard.shoprunback.com/api/v1/orders"</span><span class="p">,</span>
              <span class="ss">body: </span><span class="n">body</span><span class="p">,</span>
              <span class="ss">headers: </span><span class="p">{</span>
                <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
                <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s2">"Token token=</span><span class="si">#{</span><span class="n">your_token</span><span class="si">}</span><span class="s2">"</span>
              <span class="p">}</span>
            <span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X <span class="s2">"POST"</span> <span class="s2">"https://dashboard.shoprunback.com/api/v1/orders"</span> <span class="se">\</span>
     -H <span class="s2">"Authorization: Token token=&lt;your_token&gt;"</span> <span class="se">\</span>
     -H <span class="s2">"Content-Type: application/json; charset=utf-8"</span> <span class="se">\</span>
     -d <span class="s1">$'{
  "ordered_at": "2017-02-03",
  "order_number": "4548-9854",
  "customer": {
    "first_name": "Steve",
    "last_name": "Jobs",
    "email": "steve@apple.com",
    "phone": "555-878-456",
    "address": {
      "line1": "One Infinite Loop",
      "line2": "Building B",
      "zipcode": "95014",
      "country_code": "US",
      "city": "Cupertino",
      "state": "California"
    }
  },
  "items":
  [
    {
      "product_id": "1f27f9d9-3b5c-4152-98b7-760f56967dea",
    },
    {
      "product_id": "1f27f9d9-3b5c-4152-98b7-760f56967dea",
    }
  ],
  "metadata": {
    "foo": "bar",
    "bar": "foo"
  }
}'</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Load the library
</span><span class="k">require</span> <span class="s1">'path/to/lib/shoprunback-php/init.php'</span><span class="p">;</span>

<span class="c1">// Set your token
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">setToken</span><span class="p">(</span><span class="s1">'your_token'</span><span class="p">);</span>

<span class="c1">// Define the environment you want to use (Production or Sandbox)
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">useProductionEnvironment</span><span class="p">();</span>

<span class="c1">// Create an Address for the Customer
</span><span class="nv">$address</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Shoprunback\Elements\Address</span><span class="p">();</span>
<span class="nv">$address</span><span class="o">-&gt;</span><span class="na">country_code</span> <span class="o">=</span> <span class="s1">'US'</span><span class="p">;</span>
<span class="nv">$address</span><span class="o">-&gt;</span><span class="na">line2</span> <span class="o">=</span> <span class="s1">'Building B'</span><span class="p">;</span>
<span class="nv">$address</span><span class="o">-&gt;</span><span class="na">state</span> <span class="o">=</span> <span class="s1">'California'</span><span class="p">;</span>
<span class="nv">$address</span><span class="o">-&gt;</span><span class="na">line1</span> <span class="o">=</span> <span class="s1">'One Infinite Loop'</span><span class="p">;</span>
<span class="nv">$address</span><span class="o">-&gt;</span><span class="na">zipcode</span> <span class="o">=</span> <span class="s1">'95014'</span><span class="p">;</span>
<span class="nv">$address</span><span class="o">-&gt;</span><span class="na">city</span> <span class="o">=</span> <span class="s1">'Cupertino'</span><span class="p">;</span>

<span class="c1">// Create a Customer for the Order
</span><span class="nv">$customer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Shoprunback\Elements\Customer</span><span class="p">();</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">email</span> <span class="o">=</span> <span class="s1">'steve@apple.com'</span><span class="p">;</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">phone</span> <span class="o">=</span> <span class="s1">'555-878-456'</span><span class="p">;</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">first_name</span> <span class="o">=</span> <span class="s1">'Steve'</span><span class="p">;</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">last_name</span> <span class="o">=</span> <span class="s1">'Jobs'</span><span class="p">;</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">address</span> <span class="o">=</span> <span class="nv">$address</span><span class="p">;</span>

<span class="c1">// Create an array of Items ordered by the Customer
</span><span class="nv">$item</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Shoprunback\Elements\Item</span><span class="p">();</span>
<span class="nv">$item</span><span class="o">-&gt;</span><span class="na">product_id</span> <span class="o">=</span> <span class="s1">'1f27f9d9-3b5c-4152-98b7-760f56967dea'</span><span class="p">;</span>
<span class="nv">$items</span> <span class="o">=</span> <span class="p">[</span><span class="nv">$item</span><span class="p">];</span>

<span class="c1">// Create an Order
</span><span class="nv">$order</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Shoprunback\Elements\Order</span><span class="p">();</span>
<span class="nv">$order</span><span class="o">-&gt;</span><span class="na">order_number</span> <span class="o">=</span> <span class="s1">'4548-9854'</span><span class="p">;</span>
<span class="nv">$order</span><span class="o">-&gt;</span><span class="na">customer</span> <span class="o">=</span> <span class="nv">$customer</span><span class="p">;</span>
<span class="nv">$order</span><span class="o">-&gt;</span><span class="na">items</span> <span class="o">=</span> <span class="nv">$items</span><span class="p">;</span>
<span class="nv">$order</span><span class="o">-&gt;</span><span class="na">ordered_at</span> <span class="o">=</span> <span class="s1">'2017-02-03'</span><span class="p">;</span>

<span class="c1">// We save the Order
</span><span class="nv">$order</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>The above command returns the same JSON object with the id of the created order, customer and items:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ordered_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-03"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"order_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4548-9854"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Steve"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jobs"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"steve@apple.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555-878-456"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"line1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"One Infinite Loop"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"line2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Building B"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"zipcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"95014"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cupertino"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"California"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Iphone 14S Red"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IPHONE 14S B"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ean"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1258987561456"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"brand_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"brand_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apple"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"picture_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s3.amazonaws/assets/iphone_14s.jpg"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dec"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Iphone 14S Red"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IPHONE 14S B"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ean"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1258987561456"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"brand_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"brand_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apple"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"picture_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s3.amazonaws/assets/iphone_14s.jpg"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>An order has a <code class="prettyprint">order_number</code>, a customer and a list of items.</p>

<p>If you want to add extra data on the order, you can freely use the <code class="prettyprint">metadata</code> attribute (a simple key/value store).
The ShopRunBack API will always return this data without altering it.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://dashboard.shoprunback.com/api/v1/orders</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ordered_at</strong></td>
<td>yes</td>
<td>date of the order</td>
</tr>
<tr>
<td><strong>order_number</strong></td>
<td>yes</td>
<td>the customer&rsquo;s order number</td>
</tr>
<tr>
<td><strong>customer</strong></td>
<td>yes</td>
<td>customer information (see <a href="https://app.swaggerhub.com/apis/Shoprunback/SRB-APP">swaggerhub documentation</a> for details)</td>
</tr>
<tr>
<td><strong>items</strong></td>
<td>yes</td>
<td>Array of items (see <a href="https://app.swaggerhub.com/apis/Shoprunback/SRB-APP">swaggerhub documentation</a> for details)</td>
</tr>
<tr>
<td>metadata</td>
<td>no</td>
<td>Anything you want to add to the order, this data will always be returned and never modified.</td>
</tr>
</tbody></table>

<h2 id="list-all-orders">List all orders</h2>

<p>This endpoint lists all your paginated orders.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://dashboard.shoprunback.com/api/v1/orders?page=1</code></p>
<pre class="highlight ruby tab-ruby"><code><span class="no">HTTParty</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span>
              <span class="s2">"https://dashboard.shoprunback.com/api/v1/orders?page=1"</span><span class="p">,</span>
              <span class="ss">headers: </span><span class="p">{</span>
                <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
                <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s2">"Token token=</span><span class="si">#{</span><span class="n">your_token</span><span class="si">}</span><span class="s2">"</span>
              <span class="p">}</span>
            <span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X <span class="s2">"GET"</span> <span class="s2">"https://dashboard.shoprunback.com/api/v1/orders?page=1"</span> <span class="se">\</span>
     -H <span class="s2">"Authorization: Token token=&lt;your_token&gt;"</span> <span class="se">\</span>
     -H <span class="s2">"Content-Type: application/json; charset=utf-8"</span> <span class="se">\</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Load the library
</span><span class="k">require</span> <span class="s1">'path/to/lib/shoprunback-php/init.php'</span><span class="p">;</span>

<span class="c1">// Set your token
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">setToken</span><span class="p">(</span><span class="s1">'your_token'</span><span class="p">);</span>

<span class="c1">// Define the environment you want to use (Production or Sandbox)
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">useProductionEnvironment</span><span class="p">();</span>

<span class="c1">// Get all your orders
</span><span class="nv">$orders</span> <span class="o">=</span> <span class="nx">\Shoprunback\Elements\Order</span><span class="o">::</span><span class="na">all</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"current_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"previous_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"next_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"orders"</span><span class="p">:</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ordered_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-03"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"order_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4548-9854"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Steve"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jobs"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"steve@apple.com"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555-878-456"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"line1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"One Infinite Loop"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"line2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Building B"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"zipcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"95014"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"country_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cupertino"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"California"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"product_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Iphone 14S Red"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IPHONE 14S B"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"ean"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1258987561456"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"brand_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f27f9d9-3b5c-4152-98b7-760f56967dea"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"brand_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apple"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"picture_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://s3.amazonaws/assets/iphone_14s.jpg"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="delete-an-order">Delete an order</h2>

<p>An order can only be deleted if no corresponding shipback is attached. So you must delete it first.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE https://dashboard.shoprunback.com/api/v1/orders/:order_id</code></p>

<h3 id="errors">Errors</h3>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEPENDENT_SHIPBACK"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dependent shipback found (fee4a476-13ff-422d-85df-4ef68fa0c8d7)"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If you are trying to delete an order with a dependent shipback, you will receive an error with a <code class="prettyprint">400</code> HTTP CODE.</p>

<p>You will also have an error message and an error code in the returned JSON.</p>

<p>In this case, the error code will be <code class="prettyprint">DEPENDENT_SHIPBACK</code>.</p>

<p>If the deletion is successful, you will receive a <code class="prettyprint">200</code> HTTP CODE.</p>

          <h1 id="return">Return</h1>

<h2 id="create-the-order-and-the-return-sequentially">Create the order and the return sequentially</h2>
<pre class="highlight ruby tab-ruby"><code><span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"ordered_at"</span><span class="p">:</span> <span class="s2">"2017-06-12"</span><span class="p">,</span>
  <span class="s2">"order_number"</span><span class="p">:</span> <span class="s2">"1234567"</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"John"</span><span class="p">,</span>
    <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Doe"</span><span class="p">,</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john@doe.com"</span><span class="p">,</span>
    <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"1230145365"</span><span class="p">,</span>
    <span class="s2">"address"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"line1"</span><span class="p">:</span> <span class="s2">"651 rue de dunkerque"</span><span class="p">,</span>
      <span class="s2">"zipcode"</span><span class="p">:</span> <span class="s2">"78010"</span><span class="p">,</span>
      <span class="s2">"country_code"</span><span class="p">:</span> <span class="s2">"FR"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Paris"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">"items"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">"label"</span><span class="p">:</span> <span class="s2">"Chemise bleu"</span><span class="p">,</span>
      <span class="s2">"reference"</span><span class="p">:</span> <span class="s2">"item 001"</span><span class="p">,</span>
      <span class="s2">"product_id"</span><span class="p">:</span> <span class="s2">"reference1"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">"label"</span><span class="p">:</span> <span class="s2">"Casquette rouge"</span><span class="p">,</span>
      <span class="s2">"reference"</span><span class="p">:</span> <span class="s2">"item 2"</span><span class="p">,</span>
      <span class="s2">"product_id"</span><span class="p">:</span> <span class="s2">"reference2"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>

<span class="no">HTTParty</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span>
              <span class="s2">"https://dashboard.shoprunback.com/api/v1/orders"</span><span class="p">,</span>
              <span class="ss">body: </span><span class="n">body</span><span class="p">,</span>
              <span class="ss">headers: </span><span class="p">{</span>
                <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
                <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s2">"Token token=</span><span class="si">#{</span><span class="n">your_token</span><span class="si">}</span><span class="s2">"</span>
              <span class="p">}</span>
            <span class="p">)</span>

<span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"mode"</span><span class="p">:</span> <span class="s2">"pickup"</span><span class="p">,</span>
  <span class="s2">"order_id"</span><span class="p">:</span> <span class="s2">"1234567"</span><span class="p">,</span>
  <span class="s2">"items"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">"item_id"</span><span class="p">:</span> <span class="s2">"item 2"</span><span class="p">,</span>
      <span class="s2">"reason_code"</span><span class="p">:</span> <span class="s2">"doesnt_fit"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>

<span class="no">HTTParty</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span>
              <span class="s2">"https://dashboard.shoprunback.com/api/v1/shipbacks"</span><span class="p">,</span>
              <span class="ss">body: </span><span class="n">body</span><span class="p">,</span>
              <span class="ss">headers: </span><span class="p">{</span>
                <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
                <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s2">"Token token=</span><span class="si">#{</span><span class="n">your_token</span><span class="si">}</span><span class="s2">"</span>
              <span class="p">}</span>
            <span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X <span class="s2">"POST"</span> <span class="s2">"https://dashboard.shoprunback.com/api/v1/orders"</span> <span class="se">\</span>
     -H <span class="s2">"Authorization: Token token=&lt;your_token&gt;"</span> <span class="se">\</span>
     -H <span class="s2">"Content-Type: application/json; charset=utf-8"</span> <span class="se">\</span>
     -d <span class="s1">$'{
  "ordered_at": "2017-06-12",
  "order_number": "1234567",
  "customer": {
    "first_name": "John",
    "last_name": "Doe",
    "email": "john@doe.com",
    "phone": "1230145365",
    "address": {
      "line1": "651 rue de dunkerque",
      "zipcode": "78010",
      "country_code": "FR",
      "city": "Paris"
    }
  },
  "items": [
    {
      "label": "Chemise bleu",
      "reference": "item 001",
      "product_id": "reference1"
    },
    {
      "label": "Casquette rouge",
      "reference": "item 2",
      "product_id": "reference2"
    }
  ]
}'</span>

curl -X <span class="s2">"POST"</span> <span class="s2">"https://dashboard.shoprunback.com/api/v1/shipbacks"</span> <span class="se">\</span>
     -H <span class="s2">"Authorization: Token token=&lt;your_token&gt;"</span> <span class="se">\</span>
     -H <span class="s2">"Content-Type: application/json; charset=utf-8"</span> <span class="se">\</span>
     -d <span class="s1">$'{
  "mode": "pickup",
  "order_id": "1234567",
  "items": [
    {
      "item_id": "item 2",
      "reason_code": "doesnt_fit"
    }
  ]
}'</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Load the library
</span><span class="k">require</span> <span class="s1">'path/to/lib/shoprunback-php/init.php'</span><span class="p">;</span>

<span class="c1">// Set your token
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">setToken</span><span class="p">(</span><span class="s1">'your_token'</span><span class="p">);</span>

<span class="c1">// Define the environment you want to use (Production or Sandbox)
</span><span class="nx">\Shoprunback\RestClient</span><span class="o">::</span><span class="na">getClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">useProductionEnvironment</span><span class="p">();</span>

<span class="c1">//--------------------------------------------------------------------------
// To create a Shipback, we must first have an Order to link the Shipback to
//--------------------------------------------------------------------------
</span>
<span class="c1">// Create an Address for the Customer
</span><span class="nv">$address</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Shoprunback\Elements\Address</span><span class="p">();</span>
<span class="nv">$address</span><span class="o">-&gt;</span><span class="na">country_code</span> <span class="o">=</span> <span class="s1">'US'</span><span class="p">;</span>
<span class="nv">$address</span><span class="o">-&gt;</span><span class="na">line2</span> <span class="o">=</span> <span class="s1">'Building B'</span><span class="p">;</span>
<span class="nv">$address</span><span class="o">-&gt;</span><span class="na">state</span> <span class="o">=</span> <span class="s1">'California'</span><span class="p">;</span>
<span class="nv">$address</span><span class="o">-&gt;</span><span class="na">line1</span> <span class="o">=</span> <span class="s1">'One Infinite Loop'</span><span class="p">;</span>
<span class="nv">$address</span><span class="o">-&gt;</span><span class="na">zipcode</span> <span class="o">=</span> <span class="s1">'95014'</span><span class="p">;</span>
<span class="nv">$address</span><span class="o">-&gt;</span><span class="na">city</span> <span class="o">=</span> <span class="s1">'Cupertino'</span><span class="p">;</span>

<span class="c1">// Create a Customer for the Order
</span><span class="nv">$customer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Shoprunback\Elements\Customer</span><span class="p">();</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">email</span> <span class="o">=</span> <span class="s1">'steve@apple.com'</span><span class="p">;</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">phone</span> <span class="o">=</span> <span class="s1">'555-878-456'</span><span class="p">;</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">first_name</span> <span class="o">=</span> <span class="s1">'Steve'</span><span class="p">;</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">last_name</span> <span class="o">=</span> <span class="s1">'Jobs'</span><span class="p">;</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">address</span> <span class="o">=</span> <span class="nv">$address</span><span class="p">;</span>

<span class="c1">// Create an array of Items ordered by the Customer
</span><span class="nv">$item</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Shoprunback\Elements\Item</span><span class="p">();</span>
<span class="nv">$item</span><span class="o">-&gt;</span><span class="na">product_id</span> <span class="o">=</span> <span class="s1">'1f27f9d9-3b5c-4152-98b7-760f56967dea'</span><span class="p">;</span>
<span class="nv">$items</span> <span class="o">=</span> <span class="p">[</span><span class="nv">$item</span><span class="p">];</span>

<span class="c1">// Create an Order
</span><span class="nv">$order</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Shoprunback\Elements\Order</span><span class="p">();</span>
<span class="nv">$order</span><span class="o">-&gt;</span><span class="na">order_number</span> <span class="o">=</span> <span class="s1">'4548-9854'</span><span class="p">;</span>
<span class="nv">$order</span><span class="o">-&gt;</span><span class="na">customer</span> <span class="o">=</span> <span class="nv">$customer</span><span class="p">;</span>
<span class="nv">$order</span><span class="o">-&gt;</span><span class="na">items</span> <span class="o">=</span> <span class="nv">$items</span><span class="p">;</span>
<span class="nv">$order</span><span class="o">-&gt;</span><span class="na">ordered_at</span> <span class="o">=</span> <span class="s1">'2017-02-03'</span><span class="p">;</span>

<span class="c1">// We save the Order
</span><span class="nv">$order</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

<span class="c1">//--------------------------------------------------------
// Now that we have an Order, we can link a Shipback to it
//--------------------------------------------------------
</span>
<span class="c1">// Create a Shipback and link the Order
</span><span class="nv">$shipback</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Shoprunback\Elements\Shipback</span><span class="p">();</span>
<span class="nv">$shipback</span><span class="o">-&gt;</span><span class="na">order_id</span> <span class="o">=</span> <span class="nv">$order</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">;</span>

  <span class="c1">// Optionnal: you can directly link the Items the Customer wants to return
</span>  <span class="c1">// If you don't, the Customer will have to fill the return request's form to select them
</span>  <span class="nv">$returnedItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Shoprunback\Elements\ReturnedItem</span><span class="p">();</span>
  <span class="nv">$returnedItem</span><span class="o">-&gt;</span><span class="na">item_id</span> <span class="o">=</span> <span class="nv">$order</span><span class="o">-&gt;</span><span class="na">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">;</span> <span class="c1">// It must be the ID of an Item from the Order
</span>  <span class="nv">$returnedItem</span><span class="o">-&gt;</span><span class="na">reason_code</span> <span class="o">=</span> <span class="s1">'doesnt_fit'</span><span class="p">;</span>

  <span class="nv">$shipback</span><span class="o">-&gt;</span><span class="na">items</span> <span class="o">=</span> <span class="p">[</span><span class="nv">$returnedItem</span><span class="p">];</span>

<span class="c1">// We save the Shipback
</span><span class="nv">$shipback</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</code></pre>
<p>You can create the order and its corresponding shipback in 2 sequential API calls without parsing the first response by using your own references.</p>

<p>First, create the order with an <em>order_number</em> and the items.
You don&rsquo;t have to push all the items in the initial order if you already know which items are going to be returned, just push them and not the others. You must provide item references if you want to avoid the parsing of the response. An item reference should be unique per order.</p>

<p>Second, create the corresponding shipback attached to your <em>order_number</em> by giving the item&rsquo;s <em>reference</em> and the reason of the return.</p>

<p>If the customer details of the shipback are not provided, the order&rsquo;s customer is copied and used for the shipback.</p>

<h2 id="delete-a-shipback">Delete a shipback</h2>

<p>An shipback can only be deleted if no yet registered (the customer has not completed the whole process).</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE https://dashboard.shoprunback.com/api/v1/shipbacks/:shipback_id</code></p>

<h3 id="errors">Errors</h3>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHIPBACK_REGISTERED"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This shipback is already processing. You can't delete it."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If you are trying to delete an arlready registered shipback, you will receive an error with a <code class="prettyprint">400</code> HTTP CODE.</p>

<p>You will also have an error message and an error code in the returned JSON.</p>

<p>In this case, the error code will be <code class="prettyprint">SHIPBACK_REGISTERED</code>.</p>

<p>If the deletion is successful, you will receive a <code class="prettyprint">200</code> HTTP CODE.</p>

          <h1 id="your-own-return-process">Your own return process</h1>

<p>If <b>you don&rsquo;t want to use the return process provided by ShopRunBack</b>, you can built your own return&rsquo;s funnel.</p>

<p>For that you have to:</p>

<p>1/ Create the shipback with the list of the returned items (with the associated reason code)</p>

<p>2/ Request the quotes (for each mode - pickup, postal and dropoff - a quote is created to compute the corresponding price of the return)</p>

<p>3/ Confirm the quote (select and confirm one of the available quotes)</p>

<p>4/ Get the label</p>

<aside class="notice">
ShopRunBack is directly connected to the system of multiple carriers with variable response time.
For that reason, several calls made to the API will provide the response <b>asynchronously</b>.
</aside>

<aside class="warning">
  You can only generate the label by yourself for mode you sponsor entirely (sponsoring = 100%). Otherwise your customer has to pay for the remaining part and it can only be done on our website.
</aside>

<h2 id="1-create-the-shipback">1. Create the shipback</h2>

<p>To create the return <a href="api.html#return">follow this instruction</a>.</p>

          <h2 id="2-request-the-quotes">2. Request the quotes</h2>
<pre class="highlight ruby tab-ruby"><code><span class="no">HTTParty</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span>
              <span class="s2">"https://dashboard.shoprunback.com/api/v1/shipbacks/00082f23-9b8c-4515-b1cd-527d56a1bef3/quotes"</span><span class="p">,</span>
              <span class="ss">body: </span><span class="n">body</span><span class="p">,</span>
              <span class="ss">headers: </span><span class="p">{</span>
                <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
                <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s2">"Token token=</span><span class="si">#{</span><span class="n">your_token</span><span class="si">}</span><span class="s2">"</span>
              <span class="p">}</span>
            <span class="p">)</span>

</code></pre><pre class="highlight shell tab-shell"><code>curl -X <span class="s2">"GET"</span> <span class="s2">"https://dashboard.shoprunback.com/api/v1/shipbacks/00082f23-9b8c-4515-b1cd-527d56a1bef3/quotes"</span> <span class="se">\</span>
     -H <span class="s2">"Authorization: Token token=&lt;your_token&gt;"</span> <span class="se">\</span>
     -H <span class="s2">"Content-Type: application/json; charset=utf-8"</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
  <span class="c1">//The ShopRunBack library doesn't provide, at the moment, a dedicated method for that
</span>
<span class="c1">// get cURL resource
</span><span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="c1">// set url
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://dashboard.shoprunback.com/api/v1/shipbacks/00082f23-9b8c-4515-b1cd-527d56a1bef3/quotes'</span><span class="p">);</span>

<span class="c1">// set method
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s1">'GET'</span><span class="p">);</span>

<span class="c1">// return the transfer as a string
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="c1">// set headers
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="p">[</span>
  <span class="s1">'Authorization: Token token=your_token'</span><span class="p">,</span>
<span class="p">]);</span>

<span class="c1">// send the request and save response to $response
</span><span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// stop if fails
</span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$response</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">die</span><span class="p">(</span><span class="s1">'Error: "'</span> <span class="o">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'" - Code: '</span> <span class="o">.</span> <span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="s1">'HTTP Status Code: '</span> <span class="o">.</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">)</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="s1">'Response Body: '</span> <span class="o">.</span> <span class="nv">$response</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// close curl resource to free up system resources
</span><span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>



</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"570f3429-25ec-4685-9229-581853d0fecc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"computing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postal"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dc1383df-020b-44a6-8100-69bed63c35ee"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"computing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pickup"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d014d7c6-8f46-4c87-9d81-df91d502b1ef"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"computing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dropoff"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<p>The quotes are only computed on demand. So once the shipback created with the returned items inside, you have to trigger the computation of the quotes.</p>

<p>The computation takes some time (from 30 to 90s) to compute the 3 quotes. You can request the endpoint <code class="prettyprint">/api/v1/shipbacks/:id/quotes</code> every 20 seconds to get the state of the computation.</p>

<p>You can also query the quote of the mode you want to follow directly the computation of this mode only : <code class="prettyprint">/api/v1/shipbacks/:id/quotes/postal</code> for the postal mode.</p>

<h3 id="clear-the-quotes">Clear the quotes</h3>
<pre class="highlight ruby tab-ruby"><code><span class="no">HTTParty</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span>
              <span class="s2">"https://dashboard.shoprunback.com/api/v1/shipbacks/00082f23-9b8c-4515-b1cd-527d56a1bef3/quotes/clear"</span><span class="p">,</span>
              <span class="ss">body: </span><span class="n">body</span><span class="p">,</span>
              <span class="ss">headers: </span><span class="p">{</span>
                <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
                <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s2">"Token token=</span><span class="si">#{</span><span class="n">your_token</span><span class="si">}</span><span class="s2">"</span>
              <span class="p">}</span>
            <span class="p">)</span>

</code></pre><pre class="highlight shell tab-shell"><code>curl -X <span class="s2">"POST"</span> <span class="s2">"https://dashboard.shoprunback.com/api/v1/shipbacks/00082f23-9b8c-4515-b1cd-527d56a1bef3/quotes/clear"</span> <span class="se">\</span>
     -H <span class="s2">"Authorization: Token token=&lt;your_token&gt;"</span> <span class="se">\</span>
     -H <span class="s2">"Content-Type: application/json; charset=utf-8"</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
  <span class="c1">//The ShopRunBack library doesn't provide, at the moment, a dedicated method for that
</span>
<span class="c1">// get cURL resource
</span><span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="c1">// set url
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://dashboard.shoprunback.com/api/v1/shipbacks/00082f23-9b8c-4515-b1cd-527d56a1bef3/quotes/clear'</span><span class="p">);</span>

<span class="c1">// set method
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s1">'POST'</span><span class="p">);</span>

<span class="c1">// return the transfer as a string
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="c1">// set headers
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="p">[</span>
  <span class="s1">'Authorization: Token token=your_token'</span><span class="p">,</span>
<span class="p">]);</span>

<span class="c1">// send the request and save response to $response
</span><span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// stop if fails
</span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$response</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">die</span><span class="p">(</span><span class="s1">'Error: "'</span> <span class="o">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'" - Code: '</span> <span class="o">.</span> <span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="s1">'HTTP Status Code: '</span> <span class="o">.</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">)</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="s1">'Response Body: '</span> <span class="o">.</span> <span class="nv">$response</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// close curl resource to free up system resources
</span><span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>



</code></pre>
<p>If you have updated the shipback or simply want to retrigger the quotes computation, you have to clear them by calling the dedicated endpoint.</p>

          <h2 id="3-select-the-mode">3. Select the mode</h2>
<pre class="highlight ruby tab-ruby"><code><span class="no">HTTParty</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span>
              <span class="s2">"https://dashboard.shoprunback.com/api/v1/shipbacks/00082f23-9b8c-4515-b1cd-527d56a1bef3/quotes"</span><span class="p">,</span>
              <span class="ss">body: </span><span class="n">body</span><span class="p">,</span>
              <span class="ss">headers: </span><span class="p">{</span>
                <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
                <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s2">"Token token=</span><span class="si">#{</span><span class="n">your_token</span><span class="si">}</span><span class="s2">"</span>
              <span class="p">}</span>
            <span class="p">)</span>

</code></pre><pre class="highlight shell tab-shell"><code>curl -X <span class="s2">"GET"</span> <span class="s2">"https://dashboard.shoprunback.com/api/v1/shipbacks/00082f23-9b8c-4515-b1cd-527d56a1bef3/quotes"</span> <span class="se">\</span>
     -H <span class="s2">"Authorization: Token token=&lt;your_token&gt;"</span> <span class="se">\</span>
     -H <span class="s2">"Content-Type: application/json; charset=utf-8"</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
  <span class="c1">//The ShopRunBack library doesn't provide, at the moment, a dedicated method for that
</span>
<span class="c1">// get cURL resource
</span><span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="c1">// set url
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://dashboard.shoprunback.com/api/v1/shipbacks/00082f23-9b8c-4515-b1cd-527d56a1bef3/quotes'</span><span class="p">);</span>

<span class="c1">// set method
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s1">'GET'</span><span class="p">);</span>

<span class="c1">// return the transfer as a string
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="c1">// set headers
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="p">[</span>
  <span class="s1">'Authorization: Token token=your_token'</span><span class="p">,</span>
<span class="p">]);</span>

<span class="c1">// send the request and save response to $response
</span><span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// stop if fails
</span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$response</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">die</span><span class="p">(</span><span class="s1">'Error: "'</span> <span class="o">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'" - Code: '</span> <span class="o">.</span> <span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="s1">'HTTP Status Code: '</span> <span class="o">.</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">)</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="s1">'Response Body: '</span> <span class="o">.</span> <span class="nv">$response</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// close curl resource to free up system resources
</span><span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>



</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"570f3429-25ec-4685-9229-581853d0fecc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"computing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postal"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dc1383df-020b-44a6-8100-69bed63c35ee"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"computing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pickup"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d014d7c6-8f46-4c87-9d81-df91d502b1ef"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"computing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dropoff"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<p>To select the mode, you have to update the shipbacks and provide one of the available modes.</p>

<p>A mode is available if the corresponding quote is marked as <code class="prettyprint">available</code>.</p>

<h3 id="mode-dropoff">Mode Dropoff</h3>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"dropoff_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"O4001"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dropoff"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>To select the dropoff mode, you also have to provide a valid dropoff point code. This code is provided in the <code class="prettyprint">quotes</code> endpoint.</p>

<p>Update the shipback with the mode <code class="prettyprint">dropoff</code> and the <code class="prettyprint">dropoff_code</code> on the <code class="prettyprint">api/v1/shipbacks/:id</code> endpoint.</p>

<h3 id="mode-pickup">Mode Pickup</h3>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"pickup_datetime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-18 14:00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pickup_duration"</span><span class="p">:</span><span class="w"> </span><span class="s2">"120"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pickup"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>To select the pickup mode, you also have to provide a valid <code class="prettyprint">pickup_datetime</code> and <code class="prettyprint">pickup_duration</code>. These values are available in the <code class="prettyprint">quotes</code> endpoint.</p>

<p>Update the shipback with the mode <code class="prettyprint">pickup</code> and these 2 values on the <code class="prettyprint">api/v1/shipbacks/:id</code> endpoint.</p>

          <h2 id="4-get-the-label">4. Get the label</h2>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"bank_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"free"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>To validate the selected mode and get the label, you have to update the shipbacks on the <code class="prettyprint">api/v1/shipbacks/:id</code> endpoint with the <code class="prettyprint">bank_token</code> set to <code class="prettyprint">free</code>.</p>

<aside class="notice">
  You can only generate the label for modes free of charge for your customer, otherwise your customer has to be redirected to our website.
</aside>

<p>Once the <code class="prettyprint">bank_token</code> provided, the voucher and the label are being generated, you can get the corresponding label by polling the <code class="prettyprint">api/v1/shipbacks/:id</code> endpoint.</p>

<p>The label generation is dependent of the carriers response time, you can expect up to 1 minute of waiting to get the label.</p>

          <h1 id="overrides">Overrides</h1>

<h2 id="relocation">Relocation</h2>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pickup"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"overrides"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"relocation_warehouse_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E002"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The ShopRunBack&rsquo;s dashboard gives you the possibility to define your rules of relocation based on the reason of the return and the country of your customer.</p>

<p>If the rules engine does not fit your desires, you can override the warehouse of relocation of the entire shipback while creating (or updating) the shipback on the API by providing the warehouse ID or reference.</p>

          <h1 id="webhooks">Webhooks</h1>

<p>Every event on ShopRunBack can trigger a webhook.</p>

<p>Basically, a webhook is a JSON Object send by HTTP (POST) to an URL you have set on your account.</p>

<p>The server expect a 200 response (<code class="prettyprint">HTTP OK</code>) when posting the webhook, otherwise it is marked as not received successfully on the dashboard.</p>

<p><a href="https://dashboard.shoprunback.com/en/webhooks">Go to the webhooks dashboard</a>.</p>

<h2 id="data-sent">Data sent</h2>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">sent</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00082f23-9b8c-4515-b1cd-527d56a1bef3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shipback.relocated"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-20 16:54:22 +0100"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fc8520bf-3ae0-46b1-8991-cacb6b03c698"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postal"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>
<p>All webhooks has the same caracteristics; this is a JSON Object with the attributes:</p>

<ul>
<li>the <code class="prettyprint">id</code>: a unique identifier. You can use it to detect duplicate.</li>
<li>the name of the <code class="prettyprint">event</code> with the format: <code class="prettyprint">&lt;object trigerring the webhook&gt;.&lt;action&gt;</code></li>
<li>the date of the event which is also the date of creation of the webhook: <code class="prettyprint">created_at</code></li>
<li>the object triggering the webhook as a JSON in the <code class="prettyprint">data</code> attribute.</li>
</ul>

<p><aside class="notice">
  If you want to track a specific event and you don&rsquo;t find the appropriate webhooks above, please contact julien <em>at</em> shoprunback <em>dot</em> com.</p>

<p>If accurate, the webhook can be added to the platform in the next release.
</aside></p>

<h3 id="collaborator">Collaborator</h3>
<pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">sent</span><span class="p">:</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00082f23-9b8c-4515-b1cd-527d56a1bef3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collaborator.invited"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-20 16:54:22 +0100"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"fc8520bf-3ae0-46b1-8991-cacb6b03c698"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"tim@apple.com"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre>
<table><thead>
<tr>
<th>Webhook name</th>
<th>Trigger</th>
</tr>
</thead><tbody>
<tr>
<td>collaborator.created</td>
<td>Sent when a collaborator creates its account</td>
</tr>
<tr>
<td>collaborator.invited</td>
<td>Sent when a manager invite a collaborator</td>
</tr>
</tbody></table>

<h3 id="product">Product</h3>
<pre class="highlight json tab-json"><code><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">sent</span><span class="p">:</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00082f23-9b8c-4515-b1cd-527d56a1bef3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"product.created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-20 16:54:22 +0100"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"fc8520bf-3ae0-46b1-8991-cacb6b03c698"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Iphone 12S - Blue"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IPHONE-12S"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ean"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1237492402485"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre>
<table><thead>
<tr>
<th>Webhook name</th>
<th>Trigger</th>
</tr>
</thead><tbody>
<tr>
<td>product.created</td>
<td>Sent when a product is created in the catalogue</td>
</tr>
</tbody></table>

<h3 id="relocation">Relocation</h3>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">sent</span><span class="p">:</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00082f23-9b8c-4515-b1cd-527d56a1bef3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"relocation.created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-20 16:54:22 +0100"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"fc8520bf-3ae0-46b1-8991-cacb6b03c698"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"FR"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"reason_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"damaged"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"warehoused_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"fc8520bf-3ae0-46b1-8991-cacb6b03c699"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre>
<table><thead>
<tr>
<th>Webhook name</th>
<th>Trigger</th>
</tr>
</thead><tbody>
<tr>
<td>relocation.created</td>
<td>Sent when a new relocation rule has been created</td>
</tr>
</tbody></table>

<h3 id="returned-item">Returned Item</h3>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">sent</span><span class="p">:</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00082f23-9b8c-4515-b1cd-527d56a1bef3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"returneditem.relocated"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-20 16:54:22 +0100"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"fc8520bf-3ae0-46b1-8991-cacb6b03c698"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"reason_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"damaged"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"item"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"fc8520bf-3ae0-46b1-8991-cacb6b03c600"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"barcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12149837489"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Iphone 12S - Blue"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IPHONE-12S"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre>
<table><thead>
<tr>
<th>Webhook name</th>
<th>Trigger</th>
</tr>
</thead><tbody>
<tr>
<td>returneditem.missing</td>
<td>Sent when a returned item is marked as missing by an operator</td>
</tr>
<tr>
<td>returneditem.relocated</td>
<td>Sent when a returned item is relocated to the retailer&rsquo;s warehouse</td>
</tr>
<tr>
<td>returneditem.transiting</td>
<td>Sent when a returned item is transitting</td>
</tr>
</tbody></table>

<h3 id="shipback">Shipback</h3>
<pre class="highlight json tab-json"><code><span class="w">
  </span><span class="err">#</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">sent</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">shipback.registered</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00082f23-9b8c-4515-b1cd-527d56a1bef3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shipback.registered"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-20 16:54:22 +0100"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"fc8520bf-3ae0-46b1-8991-cacb6b03c698"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"rma"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"registered_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-20 16:58:22 +0100"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postal"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"weight_in_grams"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"S"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"computed_weight_in_grams"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"public_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://web.shoprunback.com/apple/1234"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"customer_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">#</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">sent</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">shipback.labelled</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00082f23-9b8c-4515-b1cd-527d56a1bef3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shipback.labelled"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-20 16:54:22 +0100"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"fc8520bf-3ae0-46b1-8991-cacb6b03c698"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"rma"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"registered_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-20 16:58:22 +0100"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postal"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"weight_in_grams"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"S"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"computed_weight_in_grams"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"public_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://web.shoprunback.com/apple/1234"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"customer_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://cdn.com/label/1234.pdf"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">sent</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">other</span><span class="w"> </span><span class="err">events</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00082f23-9b8c-4515-b1cd-527d56a1bef3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shipback.registered"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-20 16:54:22 +0100"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"fc8520bf-3ae0-46b1-8991-cacb6b03c698"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"rma"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre>
<table><thead>
<tr>
<th>Webhook name</th>
<th>Trigger</th>
</tr>
</thead><tbody>
<tr>
<td>shipback.created</td>
<td>Sent when a shipback is created (via the API or via the web interface)</td>
</tr>
<tr>
<td>shipback.registering</td>
<td>Sent when a customer has visited the return link</td>
</tr>
<tr>
<td>shipback.registered</td>
<td>Sent when a shipback is registered (the customer has paid or validated is free return) and the customer can download its voucher and label</td>
</tr>
<tr>
<td>shipback.labelled</td>
<td>Sent when the label is available</td>
</tr>
<tr>
<td>shipback.delivering</td>
<td>Sent when the shipback is transiting between the customer&rsquo;s location and our warehouse</td>
</tr>
<tr>
<td>shipback.delivered</td>
<td>Sent when the shipback is delivered to our warehouse</td>
</tr>
<tr>
<td>shipback.identified</td>
<td>Sent when the incoming parcel has been open and all returned items have been identified with a unique barcode or marked has missing (not returned)</td>
</tr>
<tr>
<td>shipback.relocating</td>
<td>Sent when the shipback is transitting from our warehouse to the retailer&rsquo;s warehouse</td>
</tr>
<tr>
<td>shipback.relocated</td>
<td>Sent when all the returned item&rsquo;s of a shipback are relocated to the retailer&rsquo;s warehouse</td>
</tr>
<tr>
<td>shipback.failed</td>
<td>Sent when something went wront with this shipback</td>
</tr>
</tbody></table>

<h3 id="sponsoring">Sponsoring</h3>
<pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">sent</span><span class="p">:</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00082f23-9b8c-4515-b1cd-527d56a1bef3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sponsoring.created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-20 16:54:22 +0100"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"fc8520bf-3ae0-46b1-8991-cacb6b03c698"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"percentage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FR"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"reason_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"damaged"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"merchant_fee_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="s2">"merchant_fee_max"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"customer_fee_min"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"customer_fee_max"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre>
<table><thead>
<tr>
<th>Webhook name</th>
<th>Trigger</th>
</tr>
</thead><tbody>
<tr>
<td>sponsoring.created</td>
<td>Sent when a new sponsoring rule has been created</td>
</tr>
</tbody></table>

<h3 id="warehouse">Warehouse</h3>
<pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">sent</span><span class="p">:</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00082f23-9b8c-4515-b1cd-527d56a1bef3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"warehouse.created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-20 16:54:22 +0100"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"fc8520bf-3ae0-46b1-8991-cacb6b03c698"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"APPLE01"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apple store Paris"</span><span class="p">,</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre>
<table><thead>
<tr>
<th>Webhook name</th>
<th>Trigger</th>
</tr>
</thead><tbody>
<tr>
<td>warehouse.created</td>
<td>Sent when a new warehouse is added to the company</td>
</tr>
</tbody></table>

<h2 id="set-the-url">Set the URL</h2>
<pre class="highlight ruby tab-ruby"><code>
  <span class="c1"># in a Rake base application controller</span>
  <span class="k">def</span> <span class="nf">webhook</span>
    <span class="c1"># handle the webhook content with params</span>
    <span class="n">head</span> <span class="mi">200</span> <span class="c1"># HTTP OK</span>
  <span class="k">end</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

  <span class="c1">// in a PHP Framework controller
</span>  <span class="k">private</span> <span class="k">function</span> <span class="nf">webhook</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="nv">$webhook</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="s2">"php://input"</span><span class="p">);</span>
    <span class="nv">$webhook</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$webhook</span><span class="p">);</span> <span class="c1">// the webhook data in an associative array
</span>
    <span class="k">return</span> <span class="nx">self</span><span class="o">::</span><span class="na">returnHeaderHTTP</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span> <span class="c1">//example in Prestashop
</span>  <span class="p">}</span>

<span class="cp">?&gt;</span>
</code></pre>
<p>The ShopRunBack&rsquo;s API send the webhooks on a public accessible HTTP or HTTPS endpoint (the certificate must be valid).</p>

<p>If you want to protect this endpoint, you can :</p>

<ul>
<li>setup a basic authentication and provide the login and password in the URL (<code class="prettyprint">http://&lt;login&gt;:&lt;password&gt;@host.com</code>)</li>
<li>verify the value of a specific URL parameter and provide it in the webhook URL (<code class="prettyprint">http://host.com?shoprunback=topsecret</code>)</li>
<li>Use the build-in HMAC signature without altering the URL (see below)</li>
</ul>

<p>You can set your Wehbook URL on the dashboard, in the <a href="https://dashboard.shoprunback.com/webhooks/edit">section Developers &gt; Webhooks</a>.</p>

<h2 id="signature">Signature</h2>

<p>We include a signature in each webhooks sent by ShopRunBack in the <code class="prettyprint">Shoprunback-Signature</code> header.</p>

<h3 id="define-your-secret">Define your secret</h3>

<p>You can change the secret (the default one is empty) on your dashboard: <a href="https://dashboard.shoprunback.com/webhooks/edit">section Developers &gt; Webhooks</a>.</p>

<p>Use a random string with high entropy with, by example, the following command: <code class="prettyprint">ruby -rsecurerandom -e &#39;puts SecureRandom.hex(20)&#39;</code> in your terminal.</p>

<h3 id="verify-the-signature">Verify the signature</h3>
<pre class="highlight ruby tab-ruby"><code>  <span class="n">digest</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">)</span>
  <span class="n">secret</span> <span class="o">=</span> <span class="s2">"your secret"</span> <span class="c1"># empty string if not set</span>
  <span class="n">payload</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="nf">body</span><span class="p">.</span><span class="nf">read</span>

  <span class="c1"># signature</span>
  <span class="n">hmac</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">HMAC</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">(</span><span class="n">digest</span><span class="p">,</span> <span class="n">secret</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>

  <span class="c1"># verification</span>
  <span class="n">hmac</span> <span class="o">==</span> <span class="n">request</span><span class="p">.</span><span class="nf">env</span><span class="p">[</span><span class="s1">'HTTP_SHOPRUNBACK_SIGNATURE'</span><span class="p">]</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

  <span class="nv">$secret</span> <span class="o">=</span> <span class="s2">"your secret"</span><span class="p">;</span> <span class="c1">// empty string if not set
</span>  <span class="nv">$payload</span> <span class="o">=</span> <span class="o">@</span><span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">'php://input'</span><span class="p">);</span>

  <span class="c1">// signature
</span>  <span class="nv">$hmac</span> <span class="o">=</span> <span class="nb">hash_hmac</span> <span class="p">(</span><span class="s1">'sha-256'</span><span class="p">,</span> <span class="nv">$body</span> <span class="p">,</span> <span class="nv">$secret</span><span class="p">)</span>

  <span class="c1">// verification
</span>  <span class="nv">$hmac</span> <span class="o">==</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'HTTP_STRIPE_SIGNATURE'</span><span class="p">];</span>

<span class="cp">?&gt;</span>
</code></pre>
<p>ShopRunBack generates signatures using a hash-based message authentication code (HMAC) with SHA-256.</p>

<p>To verify this signature:</p>

<ol>
<li>Get the signature in the <code class="prettyprint">Shoprunback-Signature</code> header</li>
<li>Compare the header value with HMAC (SHA-256) of the request body</li>
</ol>

<p>The two signature must be the same otherwise you can reject this webhook.</p>

<h2 id="volume">Volume</h2>

<p>The volume of webhooks increase with the amount of shipbacks ShopRunBack will handle for you.</p>

<p>Please make sure your server and the application which provides the endpoint can handle all the requests.</p>

<p>If you don&rsquo;t use the webhooks, don&rsquo;t provide any webhooks URL and the platform will not send it.</p>

      </div>
        <div class="dark-box">
            <div class="lang-selector">
                  <a href="#" data-language-name="shell">cURL</a>
                  <a href="#" data-language-name="ruby">Ruby</a>
                  <a href="#" data-language-name="php">PHP</a>
            </div>
        </div>
    </div>
  </body>
</html>
