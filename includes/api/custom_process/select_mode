<h2 id="3-select-the-mode">3. Select the mode</h2>
<pre class="highlight ruby tab-ruby"><code><span class="no">HTTParty</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span>
              <span class="s2">"https://dashboard.shoprunback.com/api/v1/shipbacks/00082f23-9b8c-4515-b1cd-527d56a1bef3/quotes"</span><span class="p">,</span>
              <span class="ss">body: </span><span class="n">body</span><span class="p">,</span>
              <span class="ss">headers: </span><span class="p">{</span>
                <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
                <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s2">"Token token=</span><span class="si">#{</span><span class="n">your_token</span><span class="si">}</span><span class="s2">"</span>
              <span class="p">}</span>
            <span class="p">)</span>

</code></pre><pre class="highlight shell tab-shell"><code>curl -X <span class="s2">"GET"</span> <span class="s2">"https://dashboard.shoprunback.com/api/v1/shipbacks/00082f23-9b8c-4515-b1cd-527d56a1bef3/quotes"</span> <span class="se">\</span>
     -H <span class="s2">"Authorization: Token token=&lt;your_token&gt;"</span> <span class="se">\</span>
     -H <span class="s2">"Content-Type: application/json; charset=utf-8"</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
  <span class="c1">//The ShopRunBack library doesn't provide, at the moment, a dedicated method for that
</span>
<span class="c1">// get cURL resource
</span><span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="c1">// set url
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://dashboard.shoprunback.com/api/v1/shipbacks/00082f23-9b8c-4515-b1cd-527d56a1bef3/quotes'</span><span class="p">);</span>

<span class="c1">// set method
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s1">'GET'</span><span class="p">);</span>

<span class="c1">// return the transfer as a string
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="c1">// set headers
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="p">[</span>
  <span class="s1">'Authorization: Token token=your_token'</span><span class="p">,</span>
<span class="p">]);</span>

<span class="c1">// send the request and save response to $response
</span><span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// stop if fails
</span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$response</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">die</span><span class="p">(</span><span class="s1">'Error: "'</span> <span class="o">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'" - Code: '</span> <span class="o">.</span> <span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="s1">'HTTP Status Code: '</span> <span class="o">.</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">)</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="s1">'Response Body: '</span> <span class="o">.</span> <span class="nv">$response</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// close curl resource to free up system resources
</span><span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>



</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"570f3429-25ec-4685-9229-581853d0fecc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"computing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postal"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dc1383df-020b-44a6-8100-69bed63c35ee"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"computing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pickup"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d014d7c6-8f46-4c87-9d81-df91d502b1ef"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"computing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dropoff"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_price_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<p>To select the mode, you have to update the shipbacks and provide one of the available modes.</p>

<p>A mode is available if the corresponding quote is marked as <code class="prettyprint">available</code>.</p>

<h3 id="mode-dropoff">Mode Dropoff</h3>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"dropoff_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"O4001"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dropoff"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>To select the dropoff mode, you also have to provide a valid dropoff point code. This code is provided in the <code class="prettyprint">quotes</code> endpoint.</p>

<p>Update the shipback with the mode <code class="prettyprint">dropoff</code> and the <code class="prettyprint">dropoff_code</code> on the <code class="prettyprint">api/v1/shipbacks/:id</code> endpoint.</p>

<h3 id="mode-pickup">Mode Pickup</h3>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"pickup_datetime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-18 14:00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pickup_duration"</span><span class="p">:</span><span class="w"> </span><span class="s2">"120"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pickup"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>To select the pickup mode, you also have to provide a valid <code class="prettyprint">pickup_datetime</code> and <code class="prettyprint">pickup_duration</code>. These values are available in the <code class="prettyprint">quotes</code> endpoint.</p>

<p>Update the shipback with the mode <code class="prettyprint">pickup</code> and these 2 values on the <code class="prettyprint">api/v1/shipbacks/:id</code> endpoint.</p>
